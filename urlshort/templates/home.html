{% extends 'base.html' %}

{% block description %}<meta name="description" content="This app provides a shortcode for website or shared file">{% endblock %}
{% block title %}URL Shortener{% endblock %}

{% block main %}
  <section class="home section">
    <div class="container">
      <h1 class="title is-2 has-text-centered">URL Shortener</h1>
      <div class="columns">
        <div class="column">
          <div class="card">
            <div class="card-content">
              <p class="title is-4 has-text-centered">For Website</p>
              <form action="your-url" method="post">
                <div class="field">
                  <label class="label">Website URL *
                    <input class="input" type="url" name="url" value="" required>
                  </label>
                </div>
                <div class="field">
                  <label class="label">Short Name *
                    <input class="input" type="text" name="code" value="" required>
                  </label>
                </div>
                <br>
                <input class="button is-black is-fullwidth" type="submit" value="Get Short Code">
              </form>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <div class="card-content">
              <p class="title is-4 has-text-centered">For File-Sharing</p>
              <form action="your-url" method="post" enctype="multipart/form-data">
                <div class="field">
                  <label class="label" for="file">File Upload *
                    <div id="file" class="file is-fullwidth">
                      <label class="file-label">
                        <input class="file-input" type="file" name="file" value="" required>
                        <span class="file-cta">
                          <span class="file-icon">
                            <i data-feather="upload"></i>
                          </span>
                          <span class="file-label has-text-weight-normal">Choose a file</span>
                        </span>
                        <span class="file-name has-text-weight-normal">No file uploaded</span>
                      </label>
                    </div>
                  </label>
                </div>
                <div class="field">
                  <label class="label">Short Name *
                    <input class="input" type="text" name="code" value="" required>
                  </label>
                </div>
                <br>
                <input class="button is-black is-fullwidth" type="submit" value="Get Short Code"> 
              </form>
            </div>
          </div>
        </div>
      </div>

      {% if codes %}
        <br>
        <h2 class="title is-4 has-text-centered">Codes you have created</h2>
          <div class="panel">
            {% for code in codes %}
            <a class="panel-block">{{ code }}</a>
            {% endfor %}
          </div>
      {% endif %}
    </div>
  </section>

  <script>
    const fileInput = document.querySelector('#file input[type=file]');
    fileInput.onchange = () => {
      if (fileInput.files.length > 0) {
        const fileName = document.querySelector('#file .file-name');
        fileName.textContent = fileInput.files[0].name;
      }
    }
  </script>
{% endblock %}
