{% extends 'base.html' %}

{% block title %} 
  URL Shortener
{% endblock %}

{% block main %}
  <section class="home section">
    <div class="container">

      <h1 class="title is-2 has-text-centered">URL Shortener</h1>

      <div class="columns">
        <div class="column">
          <div class="card">
            <div class="card-content">
              <form action="your-url" method="post">
                <div class="field">
                  <label class="label" for="url">Website URL *</label>
                  <input class="input" type="url" name="url" value="" required>
                </div>
                <div class="field">
                  <label class="label" for="code">Short Name *</label>
                  <input class="input" type="text" name="code" value="" required>
                </div>
                <br>
                <input class="button is-black is-fullwidth" type="submit" value="Get Short Code">
              </form>
            </div>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <div class="card-content">
              <form action="your-url" method="post" enctype="multipart/form-data">
                <br>
                <div id="file" class="file is-fullwidth">
                  <label class="file-label">
                    <input class="file-input" type="file" name="file" value="" required>
                    <span class="file-cta">
                      <span class="file-icon">
                        <i data-feather="upload"></i>
                      </span>
                      <span class="file-label">Choose a file *</span>
                    </span>
                    <span class="file-name">No file uploaded</span>
                  </label>
                </div>
                <br>
                <div class="field">
                  <label class="label" for="code">Short Name *</label>
                  <input class="input" type="text" name="code" value="" required>
                </div>
                <br>
                <input class="button is-black is-fullwidth" type="submit" value="Get Short Code"> 
              </form>
            </div>
          </div>
        </div>
      </div>

      {% if codes %}
        <h2 class="title is-4 has-text-centered">Codes you have created</h2>
          <div class="panel">
            {% for code in codes %}
            <a class="panel-block">{{ code }}</a>
            {% endfor %}
          </div>
      {% endif %}

    </div>
  </section>

  <script>
    const fileInput = document.querySelector('#file input[type=file]');
    fileInput.onchange = () => {
      if (fileInput.files.length > 0) {
        const fileName = document.querySelector('#file .file-name');
        fileName.textContent = fileInput.files[0].name;
      }
    }
  </script>
{% endblock %}
